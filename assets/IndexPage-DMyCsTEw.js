import{c as j,g as V,f as E,a as N,h as D,e as q,j as J,D as U,r as G,o as z,F as I,I as Q,J as O,K as W,L as X,S as Y,N as Z}from"./index-DRHz6Jvc.js";import{h as R}from"./render-BA6CfmAv.js";const K=j({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:d}){const{proxy:{$q:f}}=V(),r=q(J,E);if(r===E)return console.error("QPage needs to be a deep child of QLayout"),E;if(q(U,E)===E)return console.error("QPage needs to be child of QPageContainer"),E;const w=N(()=>{const i=(r.header.space===!0?r.header.size:0)+(r.footer.space===!0?r.footer.size:0);if(typeof e.styleFn=="function"){const o=r.isContainer.value===!0?r.containerHeight.value:f.screen.height;return e.styleFn(i,o)}return{minHeight:r.isContainer.value===!0?r.containerHeight.value-i+"px":f.screen.height===0?i!==0?`calc(100vh - ${i}px)`:"100vh":f.screen.height-i+"px"}}),a=N(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>D("main",{class:a.value,style:w.value},R(d.default))}}),H="ABCDEFGHIJKLMNOPQRSTUVWXYÆØÅ".split("");function ee(e){const d="/PocketGames/",f=new Audio(d+"/sounds/correct.wav"),r=new Audio(d+"/sounds/fail.mp3"),u=G(0),w=G(0);let a="",i=[],o=[],n=null,g=null;function b(){return H[Math.floor(Math.random()*H.length)]??"A"}function F(t){const s=new Set;s.add(t.toLowerCase());const h=Math.floor(u.value/20)*5,c=Math.min(5+h,25);for(;s.size<c;)s.add(b().toLowerCase());return Array.from(s).sort(()=>Math.random()-.5)}function S(){if(!n||!e.value)return;const t=e.value;n.clearRect(0,0,t.width,t.height),y&&(n.strokeStyle=y,n.lineWidth=10,n.strokeRect(0,0,t.width,t.height)),n.font="80px Arial",n.fillStyle="black",n.textAlign="center",n.fillText(a,t.width/2,80),n.font="20px Arial",n.textAlign="right",n.fillStyle="blue",n.fillText(`Poeng: ${u.value}`,t.width-10,30),n.textAlign="left",n.fillStyle="red",n.fillText(`Feil: ${w.value}`,10,30),n.font="40px Arial",n.fillStyle="black",n.textAlign="center";const s=i.length,h=5,c=Math.ceil(s/h),m=70;o=[];for(let v=0;v<c;v++){const k=v*h,_=Math.min(k+h,s)-k;if(_===0)continue;const M=t.width/(_+1);for(let L=0;L<_;L++){const $=M*(L+1),B=200+v*m,P=i[k+L];P&&(o.push({x:$,y:B,letter:P}),n.fillText(P,$,B))}}g=requestAnimationFrame(S)}function p(){a=b(),i=F(a),S()}let y=null,C=null;function x(t){if(!e.value)return;const s=e.value.getBoundingClientRect(),h=t.clientX-s.left,c=t.clientY-s.top;o.forEach(m=>{h>m.x-20&&h<m.x+20&&c>m.y-40&&c<m.y+10&&(m.letter===a.toLowerCase()?(u.value++,y="rgba(0, 255, 0, 0.5)",f.currentTime=0,f.play(),setTimeout(p,200)):(w.value++,y="rgba(255, 0, 0, 0.5)",r.currentTime=0,r.play()),C&&clearTimeout(C),C=setTimeout(()=>{y=null},300))})}const A=()=>{e.value&&(e.value.width=window.innerWidth*.8,e.value.height=window.innerHeight*.6,S())};z(()=>{if(!e.value)return;const t=e.value;n=t.getContext("2d"),n&&(A(),window.addEventListener("resize",A),t.addEventListener("click",x),p())}),I(()=>{window.removeEventListener("resize",A),e.value&&e.value.removeEventListener("click",x),g!==null&&cancelAnimationFrame(g)});function l(){g!==null&&(cancelAnimationFrame(g),g=null),window.removeEventListener("resize",A),e.value&&e.value.removeEventListener("click",x)}return{score:u,mistakes:w,startGame:p,stopGame:l}}function te(e){const d="/PocketGames/",f=new Audio(d+"/sounds/correct.wav"),r=new Audio(d+"/sounds/fail.mp3"),u=G(0),w=G(0);let a=[],i=[],o=null,n=null;function g(){return Math.floor(Math.random()*9)+1}function b(){const l=g(),t=10-l;if(t<1||t>9)return b();let s=g();for(;s===l||s===t;)s=g();const h=[];function c(){let T=0,_=0,M=!1;for(;!M;)T=Math.random()*(e.value.width-40),_=-Math.random()*80,M=h.every(L=>Math.abs(L.x-T)>50);return h.push({x:T,y:_}),{x:T,y:_}}const m=c(),v=c(),k=c();a.push({x:m.x,y:m.y,value:l,selected:!1,flashColor:null},{x:v.x,y:v.y,value:t,selected:!1,flashColor:null},{x:k.x,y:k.y,value:s,selected:!1,flashColor:null})}function F(){i=[],a=[],b()}function S(){for(a.forEach(l=>l.y+=.3),a=a.filter(l=>l.y<e.value.height);a.length<3;)b()}function p(){if(!o||!e.value)return;const l=e.value;o.clearRect(0,0,l.width,l.height),S();for(const t of a)o&&(o.beginPath(),o.arc(t.x+20,t.y+20,20,0,Math.PI*2),o.fillStyle=t.flashColor==="green"?"rgba(0, 255, 0, 0.7)":t.flashColor==="red"?"rgba(255, 0, 0, 0.7)":t.flashColor==="yellow"?"rgba(255, 255, 0, 0.7)":"rgb(79, 208, 240)",o.fill(),o.strokeStyle="black",o.stroke(),o.fillStyle="black",o.font="16px Arial",o.fillText(t.value.toString(),t.x+19,t.y+25));o.font="20px Arial",o.textAlign="right",o.fillStyle="blue",o.fillText(`Poeng: ${u.value}`,l.width-10,30),o.textAlign="left",o.fillStyle="red",o.fillText(`Feil: ${w.value}`,10,30),n=requestAnimationFrame(p)}function y(){i.length===2&&(i[0]&&i[1]&&i[0].value+i[1].value===10?(u.value+=1,i.forEach(l=>l.flashColor="green"),f.currentTime=0,f.play(),setTimeout(()=>{a=[],i=[],F()},300)):(w.value+=1,i.forEach(l=>l.flashColor="red"),r.currentTime=0,r.play(),setTimeout(()=>{i.forEach(l=>{l.flashColor=null,l.selected=!1}),i=[]},300)))}function C(l){if(!e.value)return;const t=e.value.getBoundingClientRect(),s=l.clientX-t.left,h=l.clientY-t.top;a.forEach(c=>{const m=s-(c.x+20),v=h-(c.y+20);Math.sqrt(m*m+v*v)<=20&&!c.selected&&(c.selected=!0,c.flashColor="yellow",i.push(c),y())})}const x=()=>{e.value&&(e.value.width=window.innerWidth*.8,e.value.height=window.innerHeight*.6,p())};z(()=>{if(!e.value)return;const l=e.value;o=l.getContext("2d"),o&&(x(),window.addEventListener("resize",x),l.addEventListener("click",C),F(),n||p())}),I(()=>{window.removeEventListener("resize",x),e.value&&e.value.removeEventListener("click",C),n!==null&&cancelAnimationFrame(n)});function A(){n!==null&&(cancelAnimationFrame(n),n=null),window.removeEventListener("resize",x),e.value&&e.value.removeEventListener("click",C),a=[],i=[]}return{score:u,startGame:F,stopGame:A,drawGame:p}}const ne=Q({__name:"GameBoard",setup(e){const d=G(null);ee(d);const f=te(d),r=()=>{const u=d.value;u&&(u.width=window.innerWidth*.8,u.height=window.innerHeight*.8)};return z(()=>{r(),window.addEventListener("resize",r),f.startGame()}),I(()=>{window.removeEventListener("resize",r)}),(u,w)=>(W(),O(K,{class:"fle x"},{default:X(()=>[Y("canvas",{ref_key:"canvasRef",ref:d},null,512)]),_:1}))}}),oe=(e,d)=>{const f=e.__vccOpts||e;for(const[r,u]of d)f[r]=u;return f},le=oe(ne,[["__scopeId","data-v-acc5d974"]]),ie={class:"q-ma-xl q-pb-xl"},se=Q({__name:"IndexPage",setup(e){return(d,f)=>(W(),O(K,{class:"row justify-evenly"},{default:X(()=>[Y("div",ie,[Z(le,{gameName:"letter"})])]),_:1}))}});export{se as default};
