import{Q as N}from"./QPage-D1P9TooQ.js";import{r as G,o as P,G as B,I as O,J as V,N as X,K as Y,Q as x,V as z,Z as F}from"./index-z5EyxGBh.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./render-DOeuMgIi.js";const I="ABCDEFGHIJKLMNOPQRSTUVWXYÆØÅ".split("");function J(n){const a="/PocketGames/",s=new Audio(a+"/sounds/correct.wav"),c=new Audio(a+"/sounds/fail.mp3"),i=G(0),f=G(0);let h="",_=[],L=[],e=null,u=null;function E(){return I[Math.floor(Math.random()*I.length)]??"A"}function H(t){const o=new Set;o.add(t.toLowerCase());const l=Math.floor(i.value/20)*5,d=Math.min(5+l,25);for(;o.size<d;)o.add(E().toLowerCase());return Array.from(o).sort(()=>Math.random()-.5)}function w(){if(!n.value)return;const t=n.value;if(e=t.getContext("2d"),!e)return;e.clearRect(0,0,t.width,t.height),m&&(e.strokeStyle=m,e.lineWidth=10,e.strokeRect(0,0,t.width,t.height)),e.font="80px Arial",e.fillStyle="black",e.textAlign="center",e.fillText(h,t.width/2,80),e.font="20px Arial",e.textAlign="right",e.fillStyle="blue",e.fillText(`Poeng: ${i.value}`,t.width-10,30),e.textAlign="left",e.fillStyle="red",e.fillText(`Feil: ${f.value}`,10,30),e.font="40px Arial",e.fillStyle="black",e.textAlign="center";const o=_.length,l=5,d=Math.ceil(o/l),r=70;L=[];for(let p=0;p<d;p++){const A=p*l,S=Math.min(A+l,o)-A;if(S===0)continue;const W=t.width/(S+1);for(let v=0;v<S;v++){const M=W*(v+1),b=200+p*r,T=_[A+v];T&&(L.push({x:M,y:b,letter:T}),e.fillText(T,M,b))}}u=requestAnimationFrame(w)}function y(){console.log("Letter game has started"),h=E(),_=H(h),w()}let m=null,C=null;function g(t){if(!n.value)return;const o=n.value.getBoundingClientRect(),l=t.clientX-o.left,d=t.clientY-o.top;L.forEach(r=>{l>r.x-20&&l<r.x+20&&d>r.y-40&&d<r.y+10&&(r.letter===h.toLowerCase()?(i.value++,m="rgba(0, 255, 0, 0.5)",s.currentTime=0,s.play(),setTimeout(y,200)):(f.value++,m="rgba(255, 0, 0, 0.5)",c.currentTime=0,c.play()),C&&clearTimeout(C),C=setTimeout(()=>{m=null},300))})}const k=()=>{n.value&&(n.value.width=window.innerWidth*.8,n.value.height=window.innerHeight*.6,w())};P(()=>{if(!n.value)return;const t=n.value;e=t.getContext("2d"),e&&(k(),t.addEventListener("click",g),y())}),B(()=>{window.removeEventListener("resize",k),n.value&&n.value.removeEventListener("click",g),u!==null&&cancelAnimationFrame(u)});function Q(){u!==null&&(cancelAnimationFrame(u),u=null),window.removeEventListener("resize",k),n.value&&n.value.removeEventListener("click",g)}return{score:i,mistakes:f,startGame:y,stopGame:Q,handleClick:g,drawGame:w}}const K={class:"row",style:{"font-size":"24px"}},U={class:"col-2",style:{color:"blue"}},$={style:{color:"red"}},q=O({__name:"SmallLetter",setup(n){const a=G(null),s=J(a),c=()=>{const i=a.value;i&&(i.width=window.innerWidth*.8,i.height=window.innerHeight*.8)};return P(()=>{c(),window.addEventListener("resize",c),s.startGame()}),B(()=>{window.removeEventListener("resize",c)}),(i,f)=>(X(),V(N,null,{default:Y(()=>[x("div",K,[x("span",U,"Poeng: "+z(F(s).score),1),x("span",$,"Feil: "+z(F(s).mistakes),1)]),x("canvas",{ref_key:"canvasRef",ref:a},null,512)]),_:1}))}}),ne=D(q,[["__scopeId","data-v-a10ca0d4"]]);export{ne as default};
