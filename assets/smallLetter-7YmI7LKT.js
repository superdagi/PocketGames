import{r as E,o as B,G as H}from"./index-G9jaPDek.js";const F="ABCDEFGHIJKLMNOPQRSTUVWXYÆØÅ".split("");function X(n){const y="/PocketGames/",S=new Audio(y+"/sounds/correct.wav"),T=new Audio(y+"/sounds/fail.mp3"),c=E(0),w=E(0);let s="",g=[],x=[],t=null,r=null;function M(){return F[Math.floor(Math.random()*F.length)]??"A"}function I(e){const o=new Set;o.add(e.toLowerCase());const i=Math.floor(c.value/20)*5,a=Math.min(5+i,25);for(;o.size<a;)o.add(M().toLowerCase());return Array.from(o).sort(()=>Math.random()-.5)}function d(){if(!n.value)return;const e=n.value;if(t=e.getContext("2d"),!t)return;t.clearRect(0,0,e.width,e.height),u&&(t.strokeStyle=u,t.lineWidth=10,t.strokeRect(0,0,e.width,e.height)),t.font="80px Arial",t.fillStyle="black",t.textAlign="center",t.fillText(s,e.width/2,80),t.font="20px Arial",t.textAlign="right",t.fillStyle="blue",t.fillText(`Poeng: ${c.value}`,e.width-10,30),t.textAlign="left",t.fillStyle="red",t.fillText(`Feil: ${w.value}`,10,30),t.font="40px Arial",t.fillStyle="black",t.textAlign="center";const o=g.length,i=5,a=Math.ceil(o/i),l=70;x=[];for(let f=0;f<a;f++){const C=f*i,L=Math.min(C+i,o)-C;if(L===0)continue;const z=e.width/(L+1);for(let h=0;h<L;h++){const G=z*(h+1),b=200+f*l,k=g[C+h];k&&(x.push({x:G,y:b,letter:k}),t.fillText(k,G,b))}}r=requestAnimationFrame(d)}function v(){console.log("Letter game has started"),s=M(),g=I(s),d()}let u=null,p=null;function m(e){if(!n.value)return;const o=n.value.getBoundingClientRect(),i=e.clientX-o.left,a=e.clientY-o.top;x.forEach(l=>{i>l.x-20&&i<l.x+20&&a>l.y-40&&a<l.y+35&&(l.letter===s.toLowerCase()?(c.value++,u="rgba(0, 255, 0, 0.5)",S.currentTime=0,S.play(),setTimeout(v,200)):(w.value++,u="rgba(255, 0, 0, 0.5)",T.currentTime=0,T.play()),p&&clearTimeout(p),p=setTimeout(()=>{u=null},300))})}const A=()=>{n.value&&(n.value.width=window.innerWidth*.8,n.value.height=window.innerHeight*.6,d())};B(()=>{if(!n.value)return;const e=n.value;t=e.getContext("2d"),t&&(A(),e.addEventListener("click",m),v())}),H(()=>{window.removeEventListener("resize",A),n.value&&n.value.removeEventListener("click",m),r!==null&&cancelAnimationFrame(r)});function P(){r!==null&&(cancelAnimationFrame(r),r=null),window.removeEventListener("resize",A),n.value&&n.value.removeEventListener("click",m)}return{score:c,mistakes:w,startGame:v,stopGame:P,handleClick:m,drawGame:d}}export{X as u};
