import{r as G,o as P,G as N}from"./index-CUzrrWzW.js";function q(o){const C="/PocketGames/",E=new Audio(C+"/sounds/correct.wav"),A=new Audio(C+"/sounds/fail.mp3"),v=G(0),g=G(0);let i=[],n=[],t=null,a=null;function w(){return Math.floor(Math.random()*9)+1}function y(){const e=w(),l=10-e;if(l<1||l>9)return y();let s=w();for(;s===e||s===l;)s=w();const h=[];function r(){let m=0,k=0,M=!1;for(;!M;)m=Math.random()*(o.value.width-40),k=-Math.random()*80,M=h.every(L=>Math.abs(L.x-m)>50);return h.push({x:m,y:k}),{x:m,y:k}}const u=r(),c=r(),b=r();i.push({x:u.x,y:u.y,value:e,selected:!1,flashColor:null},{x:c.x,y:c.y,value:l,selected:!1,flashColor:null},{x:b.x,y:b.y,value:s,selected:!1,flashColor:null})}function x(){n=[],i=[],y()}function S(){for(i.forEach(e=>e.y+=.3),i=i.filter(e=>e.y<o.value.height);i.length<3;)y()}function d(){if(!t||!o.value)return;const e=o.value;t.clearRect(0,0,e.width,e.height),S();for(const l of i)t&&(t.beginPath(),t.arc(l.x+20,l.y+20,20,0,Math.PI*2),t.fillStyle=l.flashColor==="green"?"rgba(0, 255, 0, 0.7)":l.flashColor==="red"?"rgba(255, 0, 0, 0.7)":l.flashColor==="yellow"?"rgba(255, 255, 0, 0.7)":"rgb(79, 208, 240)",t.fill(),t.strokeStyle="black",t.stroke(),t.fillStyle="black",t.font="16px Arial",t.fillText(l.value.toString(),l.x+19,l.y+25));t.font="20px Arial",t.textAlign="right",t.fillStyle="blue",t.fillText(`Poeng: ${v.value}`,e.width-10,30),t.textAlign="left",t.fillStyle="red",t.fillText(`Feil: ${g.value}`,10,30),a=requestAnimationFrame(d)}function T(){n.length===2&&(n[0]&&n[1]&&n[0].value+n[1].value===10?(v.value+=1,n.forEach(e=>e.flashColor="green"),E.currentTime=0,E.play(),setTimeout(()=>{i=[],n=[],x()},300)):(g.value+=1,n.forEach(e=>e.flashColor="red"),A.currentTime=0,A.play(),setTimeout(()=>{n.forEach(e=>{e.flashColor=null,e.selected=!1}),n=[]},300)))}function p(e){if(!o.value)return;const l=o.value.getBoundingClientRect(),s=e.clientX-l.left,h=e.clientY-l.top;i.forEach(r=>{const u=s-(r.x+20),c=h-(r.y+20);Math.sqrt(u*u+c*c)<=20&&!r.selected&&(r.selected=!0,r.flashColor="yellow",n.push(r),T())})}const f=()=>{o.value&&(o.value.width=window.innerWidth*.8,o.value.height=window.innerHeight*.6,d())};P(()=>{if(!o.value)return;const e=o.value;t=e.getContext("2d"),t&&(f(),window.addEventListener("resize",f),e.addEventListener("click",p),x(),a||d())}),N(()=>{window.removeEventListener("resize",f),o.value&&o.value.removeEventListener("click",p),a!==null&&cancelAnimationFrame(a)});function F(){a!==null&&(cancelAnimationFrame(a),a=null),window.removeEventListener("resize",f),o.value&&o.value.removeEventListener("click",p),i=[],n=[]}return{score:v,mistakes:g,startGame:x,stopGame:F,drawGame:d}}export{q as u};
